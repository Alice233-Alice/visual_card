<head><script type="module">import{createPinia as e}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var a={502(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[e,l]of a)t[e]=l;return t}}},t={};const l=Vue,n={class:'gallery-container'},c={class:'gallery-header'},r={class:'header-info'},o={key:0,class:'current-char'},s={class:'card-count'},i={key:0,class:'character-filter'},d=['onClick'],m={class:'gallery-grid'},p=['onClick'],u={class:'flip-card-inner'},f={class:'flip-card-front'},v=['src','alt'],N={class:'card-overlay'},k={key:0,class:'card-name'},E={class:'card-character'},V={class:'flip-card-back'},h=['src','alt'],g={key:1,class:'empty-state'},y=(0,l.defineComponent)({__name:'app',setup(e){const a=[{character:'示例角色',front:'https://files.catbox.moe/c1su29.jpg',back:'https://files.catbox.moe/8doe0f.jpg',name:'神秘角色',alwaysShow:!0}],t=(0,l.ref)(null),y=(0,l.ref)(null),C=(0,l.computed)(()=>{const e=new Set;return a.forEach(a=>e.add(a.character)),Array.from(e)}),B=()=>{try{const e=SillyTavern.name2||null;t.value=e}catch{t.value=null}};(0,l.onMounted)(()=>{B(),eventOn(tavern_events.CHAT_CHANGED,()=>{B()})});const b=(0,l.ref)([]);(0,l.watch)([t,y],()=>{const e=[];a.forEach(a=>{const l=a.alwaysShow||!t.value||a.character===t.value,n=null===y.value||a.character===y.value;if(l&&n){const t=b.value.find(e=>e.character===a.character&&e.front===a.front&&e.back===a.back);e.push({...a,isFlipped:t?.isFlipped||!1})}}),b.value=e},{immediate:!0});return(e,a)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',n,[(0,l.createCommentVNode)(' 标题栏 '),(0,l.createElementVNode)('div',c,[a[2]||(a[2]=(0,l.createElementVNode)('div',{class:'header-title'},[(0,l.createElementVNode)('i',{class:'fa-solid fa-images'}),(0,l.createElementVNode)('span',null,'角色图鉴')],-1)),(0,l.createElementVNode)('div',r,[(0,l.unref)(t)?((0,l.openBlock)(),(0,l.createElementBlock)('span',o,[a[1]||(a[1]=(0,l.createElementVNode)('i',{class:'fa-solid fa-user'},null,-1)),(0,l.createTextVNode)(' '+(0,l.toDisplayString)((0,l.unref)(t)),1)])):(0,l.createCommentVNode)('v-if',!0),(0,l.createElementVNode)('span',s,(0,l.toDisplayString)((0,l.unref)(b).length)+' 张卡片',1)])]),(0,l.createCommentVNode)(' 角色筛选（如果有多个角色） '),(0,l.unref)(C).length>1?((0,l.openBlock)(),(0,l.createElementBlock)('div',i,[(0,l.createElementVNode)('button',{class:(0,l.normalizeClass)(['filter-btn',{active:null===(0,l.unref)(y)}]),onClick:a[0]||(a[0]=e=>y.value=null)},' 全部 ',2),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)((0,l.unref)(C),e=>((0,l.openBlock)(),(0,l.createElementBlock)('button',{key:e,class:(0,l.normalizeClass)(['filter-btn',{active:(0,l.unref)(y)===e}]),onClick:a=>y.value=e},(0,l.toDisplayString)(e),11,d))),128))])):(0,l.createCommentVNode)('v-if',!0),(0,l.createCommentVNode)(' 图片网格 '),(0,l.createElementVNode)('div',m,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)((0,l.unref)(b),(e,a)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:`${e.character}-${a}`,class:(0,l.normalizeClass)(['flip-card',{flipped:e.isFlipped}]),onClick:a=>(e=>{e.isFlipped=!e.isFlipped})(e)},[(0,l.createElementVNode)('div',u,[(0,l.createCommentVNode)(' 正面 '),(0,l.createElementVNode)('div',f,[(0,l.createElementVNode)('img',{src:e.front,alt:e.name||e.character,loading:'lazy'},null,8,v),(0,l.createElementVNode)('div',N,[e.name?((0,l.openBlock)(),(0,l.createElementBlock)('div',k,(0,l.toDisplayString)(e.name),1)):(0,l.createCommentVNode)('v-if',!0),(0,l.createElementVNode)('div',E,(0,l.toDisplayString)(e.character),1)])]),(0,l.createCommentVNode)(' 背面 '),(0,l.createElementVNode)('div',V,[(0,l.createElementVNode)('img',{src:e.back,alt:`${e.name||e.character} 背面`,loading:'lazy'},null,8,h)])])],10,p))),128))]),(0,l.createCommentVNode)(' 空状态 '),0===(0,l.unref)(b).length?((0,l.openBlock)(),(0,l.createElementBlock)('div',g,[...a[3]||(a[3]=[(0,l.createElementVNode)('i',{class:'fa-solid fa-image'},null,-1),(0,l.createElementVNode)('p',null,'暂无图片',-1),(0,l.createElementVNode)('p',{class:'hint'},'请在代码中配置 GALLERY_CONFIG 添加图片',-1)])])):(0,l.createCommentVNode)('v-if',!0),(0,l.createCommentVNode)(' 提示 '),a[4]||(a[4]=(0,l.createElementVNode)('div',{class:'gallery-footer'},[(0,l.createElementVNode)('span',null,'点击卡片可翻转查看背面')],-1))]))}});var C=function e(l){var n=t[l];if(void 0!==n)return n.exports;var c=t[l]={exports:{}};return a[l](c,c.exports,e),c.exports}(502);const B=(0,C.A)(y,[['__scopeId','data-v-160bd56e']]);$(()=>{const a=e(),t=(0,l.createApp)(B);t.use(a),t.mount('#app'),console.info('[角色图鉴] 界面已加载')});
//# sourceMappingURL=index.js.map</script><style>.gallery-container[data-v-160bd56e]{width:100%;font-family:"Microsoft YaHei","PingFang SC",sans-serif;background:linear-gradient(180deg,rgba(15,20,35,0.95) 0%,rgba(10,15,30,0.98) 100%);border-radius:12px;overflow:hidden;color:#e0e8f0}.gallery-header[data-v-160bd56e]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:linear-gradient(90deg,rgba(60,80,120,0.4) 0%,rgba(100,60,120,0.4) 100%);border-bottom:1px solid rgba(100,150,200,.2)}.gallery-header .header-title[data-v-160bd56e]{display:flex;align-items:center;gap:10px;font-size:18px;font-weight:bold;color:#e8f0ff}.gallery-header .header-title i[data-v-160bd56e]{color:#8af}.gallery-header .header-info[data-v-160bd56e]{display:flex;align-items:center;gap:16px;font-size:13px;color:#8090a0}.gallery-header .header-info .current-char[data-v-160bd56e]{display:flex;align-items:center;gap:6px;padding:4px 10px;background:rgba(100,150,200,.2);border-radius:12px}.gallery-header .header-info .current-char i[data-v-160bd56e]{color:#8ac}.character-filter[data-v-160bd56e]{display:flex;flex-wrap:wrap;gap:8px;padding:12px 20px;background:rgba(25,30,50,.5);border-bottom:1px solid rgba(100,150,200,.1)}.character-filter .filter-btn[data-v-160bd56e]{padding:6px 14px;background:rgba(50,60,80,.5);border:1px solid rgba(100,150,200,.2);border-radius:16px;color:#8090a0;font-size:12px;cursor:pointer;transition:all .2s}.character-filter .filter-btn[data-v-160bd56e]:hover{background:rgba(80,100,140,.4);color:#b0c0d0}.character-filter .filter-btn.active[data-v-160bd56e]{background:linear-gradient(135deg,rgba(80,120,180,0.5) 0%,rgba(120,80,160,0.5) 100%);border-color:rgba(100,150,200,.5);color:#e0f0ff}.gallery-grid[data-v-160bd56e]{display:flex;flex-wrap:nowrap;justify-content:center;gap:20px;padding:20px;min-height:200px;overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.gallery-grid[data-v-160bd56e]::-webkit-scrollbar{height:8px}.gallery-grid[data-v-160bd56e]::-webkit-scrollbar-track{background:rgba(30,40,60,.5);border-radius:4px}.gallery-grid[data-v-160bd56e]::-webkit-scrollbar-thumb{background:rgba(100,150,200,.4);border-radius:4px}.gallery-grid[data-v-160bd56e]::-webkit-scrollbar-thumb:hover{background:rgba(100,150,200,.6)}.flip-card[data-v-160bd56e]{flex-shrink:0;width:320px;aspect-ratio:2/3;perspective:1000px;cursor:pointer}.flip-card:hover .flip-card-inner[data-v-160bd56e]{box-shadow:0 15px 40px rgba(100,150,255,.4);transform:scale(1.03)}.flip-card-inner[data-v-160bd56e]{position:relative;width:100%;height:100%;transition:transform .7s cubic-bezier(0.4,0,0.2,1),box-shadow .3s;transform-style:preserve-3d;border-radius:14px;box-shadow:0 8px 25px rgba(0,0,0,.5)}.flip-card.flipped .flip-card-inner[data-v-160bd56e]{transform:rotateY(180deg)}.flip-card-front[data-v-160bd56e],.flip-card-back[data-v-160bd56e]{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:14px;overflow:hidden;border:2px solid rgba(100,150,200,.3)}.flip-card-front img[data-v-160bd56e],.flip-card-back img[data-v-160bd56e]{width:100%;height:100%;object-fit:cover;transition:transform .3s}.flip-card-front:hover img[data-v-160bd56e],.flip-card-back:hover img[data-v-160bd56e]{transform:scale(1.05)}.flip-card-front .card-overlay[data-v-160bd56e]{position:absolute;bottom:0;left:0;right:0;padding:16px;background:linear-gradient(to top,rgba(0,0,0,0.9) 0%,rgba(0,0,0,0.5) 50%,transparent 100%)}.flip-card-front .card-name[data-v-160bd56e]{font-size:16px;font-weight:bold;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.8);margin-bottom:4px}.flip-card-front .card-character[data-v-160bd56e]{font-size:12px;color:hsla(0,0%,100%,.7)}.flip-card-back[data-v-160bd56e]{transform:rotateY(180deg)}.empty-state[data-v-160bd56e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#506070}.empty-state i[data-v-160bd56e]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-state p[data-v-160bd56e]{margin:4px 0;font-size:14px}.empty-state .hint[data-v-160bd56e]{font-size:12px;color:#405060}.gallery-footer[data-v-160bd56e]{text-align:center;padding:12px 20px;font-size:12px;color:#506070;background:rgba(15,20,35,.5);border-top:1px solid rgba(100,150,200,.1)}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>