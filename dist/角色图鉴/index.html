<head><script type="module">import{createPinia as e}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var r={502(e,r){r.A=(e,r)=>{const a=e.__vccOpts||e;for(const[e,t]of r)a[e]=t;return a}}},a={};const t=Vue,o={class:'gallery-header'},l={class:'header-info'},n={key:0,class:'current-char'},c={class:'card-count'},m={key:1,class:'character-filter'},d=['onClick'],i={class:'gallery-grid'},s=['onClick'],p={class:'flip-card-inner'},f={class:'flip-card-front'},u=['src','alt'],g={class:'card-overlay'},h={key:0,class:'card-name'},y={class:'card-character'},v={class:'flip-card-back'},b=['src','alt'],k={key:2,class:'empty-state'},N=(0,t.defineComponent)({__name:'app',setup(e){const r={primary:'#ffaabb',primaryLight:'rgba(255, 150, 180, 0.5)',primaryDark:'rgba(180, 80, 120, 0.4)',bgMain:'rgba(35, 20, 25, 0.95)',bgSecondary:'rgba(25, 15, 20, 0.98)',bgHeader:'linear-gradient(90deg, rgba(120, 60, 80, 0.4) 0%, rgba(150, 80, 100, 0.4) 100%)',borderColor:'rgba(255, 150, 180, 0.2)',cardBorder:'rgba(255, 150, 180, 0.3)',cardShadow:'rgba(0, 0, 0, 0.5)',cardHoverShadow:'rgba(255, 150, 200, 0.4)',textPrimary:'#fff0f5',textSecondary:'#c0a0a8',textMuted:'#806070',frame:{type:'pattern',patternColor:'#ffaabb'}},a=[{character:'示例角色',front:'https://files.catbox.moe/c1su29.jpg',back:'https://files.catbox.moe/8doe0f.jpg',name:'神秘角色',alwaysShow:!0}],N=(0,t.computed)(()=>{const e=r.frame,a={'--theme-primary':r.primary,'--theme-primary-light':r.primaryLight,'--theme-primary-dark':r.primaryDark,'--theme-bg-main':r.bgMain,'--theme-bg-secondary':r.bgSecondary,'--theme-bg-header':r.bgHeader,'--theme-border-color':r.borderColor,'--theme-card-border':r.cardBorder,'--theme-card-shadow':r.cardShadow,'--theme-card-hover-shadow':r.cardHoverShadow,'--theme-text-primary':r.textPrimary,'--theme-text-secondary':r.textSecondary,'--theme-text-muted':r.textMuted};return e&&(a['--frame-type']=e.type,e.glowColor&&(a['--frame-glow-color']=e.glowColor),e.glowSize&&(a['--frame-glow-size']=e.glowSize),e.patternColor&&(a['--frame-pattern-color']=e.patternColor),e.borderImage&&(a['--frame-border-image']=`url(${e.borderImage})`),e.borderImageSlice&&(a['--frame-border-slice']=e.borderImageSlice),e.borderImageWidth&&(a['--frame-border-width']=e.borderImageWidth),e.cornerImage&&(a['--frame-corner-image']=`url(${e.cornerImage})`),e.cornerSize&&(a['--frame-corner-size']=e.cornerSize)),a}),V=(0,t.computed)(()=>{const e=r.frame;return e&&'none'!==e.type?`frame-${e.type}${e.glowAnimation?' frame-animated':''}`:''}),E=(0,t.ref)(null),C=(0,t.ref)(null),S=(0,t.computed)(()=>{const e=new Set;return a.forEach(r=>e.add(r.character)),Array.from(e)}),B=()=>{try{const e=SillyTavern.name2||null;E.value=e}catch{E.value=null}};(0,t.onMounted)(()=>{B(),eventOn(tavern_events.CHAT_CHANGED,()=>{B()})});const w=(0,t.ref)([]);(0,t.watch)([E,C],()=>{const e=[];a.forEach(r=>{const a=r.alwaysShow||!E.value||r.character===E.value,t=null===C.value||r.character===C.value;if(a&&t){const a=w.value.find(e=>e.character===r.character&&e.front===r.front&&e.back===r.back);e.push({...r,isFlipped:a?.isFlipped||!1})}}),w.value=e},{immediate:!0});return(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{class:(0,t.normalizeClass)(['gallery-container',(0,t.unref)(V)]),style:(0,t.normalizeStyle)((0,t.unref)(N))},[(0,t.createCommentVNode)(' 四角装饰（仅在 corner 模式下显示） '),'corner'===(0,t.unref)(r).frame?.type?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:0},[a[1]||(a[1]=(0,t.createElementVNode)('div',{class:'corner-bottom-left'},null,-1)),a[2]||(a[2]=(0,t.createElementVNode)('div',{class:'corner-bottom-right'},null,-1))],64)):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 标题栏 '),(0,t.createElementVNode)('div',o,[a[4]||(a[4]=(0,t.createElementVNode)('div',{class:'header-title'},[(0,t.createElementVNode)('i',{class:'fa-solid fa-images'}),(0,t.createElementVNode)('span',null,'角色图鉴')],-1)),(0,t.createElementVNode)('div',l,[(0,t.unref)(E)?((0,t.openBlock)(),(0,t.createElementBlock)('span',n,[a[3]||(a[3]=(0,t.createElementVNode)('i',{class:'fa-solid fa-user'},null,-1)),(0,t.createTextVNode)(' '+(0,t.toDisplayString)((0,t.unref)(E)),1)])):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('span',c,(0,t.toDisplayString)((0,t.unref)(w).length)+' 张卡片',1)])]),(0,t.createCommentVNode)(' 角色筛选（如果有多个角色） '),(0,t.unref)(S).length>1?((0,t.openBlock)(),(0,t.createElementBlock)('div',m,[(0,t.createElementVNode)('button',{class:(0,t.normalizeClass)(['filter-btn',{active:null===(0,t.unref)(C)}]),onClick:a[0]||(a[0]=e=>C.value=null)},' 全部 ',2),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)((0,t.unref)(S),e=>((0,t.openBlock)(),(0,t.createElementBlock)('button',{key:e,class:(0,t.normalizeClass)(['filter-btn',{active:(0,t.unref)(C)===e}]),onClick:r=>C.value=e},(0,t.toDisplayString)(e),11,d))),128))])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 图片网格 '),(0,t.createElementVNode)('div',i,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)((0,t.unref)(w),(e,r)=>((0,t.openBlock)(),(0,t.createElementBlock)('div',{key:`${e.character}-${r}`,class:(0,t.normalizeClass)(['flip-card',{flipped:e.isFlipped}]),onClick:r=>(e=>{e.isFlipped=!e.isFlipped})(e)},[(0,t.createElementVNode)('div',p,[(0,t.createCommentVNode)(' 正面 '),(0,t.createElementVNode)('div',f,[(0,t.createElementVNode)('img',{src:e.front,alt:e.name||e.character,loading:'lazy'},null,8,u),(0,t.createElementVNode)('div',g,[e.name?((0,t.openBlock)(),(0,t.createElementBlock)('div',h,(0,t.toDisplayString)(e.name),1)):(0,t.createCommentVNode)('v-if',!0),(0,t.createElementVNode)('div',y,(0,t.toDisplayString)(e.character),1)])]),(0,t.createCommentVNode)(' 背面 '),(0,t.createElementVNode)('div',v,[(0,t.createElementVNode)('img',{src:e.back,alt:`${e.name||e.character} 背面`,loading:'lazy'},null,8,b)])])],10,s))),128))]),(0,t.createCommentVNode)(' 空状态 '),0===(0,t.unref)(w).length?((0,t.openBlock)(),(0,t.createElementBlock)('div',k,[...a[5]||(a[5]=[(0,t.createElementVNode)('i',{class:'fa-solid fa-image'},null,-1),(0,t.createElementVNode)('p',null,'暂无图片',-1),(0,t.createElementVNode)('p',{class:'hint'},'请在代码中配置 GALLERY_CONFIG 添加图片',-1)])])):(0,t.createCommentVNode)('v-if',!0),(0,t.createCommentVNode)(' 提示 '),a[6]||(a[6]=(0,t.createElementVNode)('div',{class:'gallery-footer'},[(0,t.createElementVNode)('span',null,'点击卡片可翻转查看背面')],-1))],6))}});var V=function e(t){var o=a[t];if(void 0!==o)return o.exports;var l=a[t]={exports:{}};return r[t](l,l.exports,e),l.exports}(502);const E=(0,V.A)(N,[['__scopeId','data-v-6400d24e']]);$(()=>{const r=e(),a=(0,t.createApp)(E);a.use(r),a.mount('#app'),console.info('[角色图鉴] 界面已加载')});
//# sourceMappingURL=index.js.map</script><style>.gallery-container[data-v-6400d24e]{width:100%;font-family:"Microsoft YaHei","PingFang SC",sans-serif;background:linear-gradient(180deg,var(--theme-bg-main) 0%,var(--theme-bg-secondary) 100%);border-radius:12px;overflow:hidden;color:var(--theme-text-primary);position:relative}.gallery-container.frame-glow[data-v-6400d24e]{box-shadow:0 0 var(--frame-glow-size,15px) var(--frame-glow-color,#4488ff),inset 0 0 calc(var(--frame-glow-size,15px)/2) hsla(0,0%,100%,.1);border:2px solid var(--frame-glow-color,#4488ff)}.gallery-container.frame-glow.frame-animated[data-v-6400d24e]{animation:glowPulse-6400d24e 3s ease-in-out infinite}.gallery-container.frame-pattern[data-v-6400d24e]{border:3px solid rgba(0,0,0,0);background-clip:padding-box;position:relative}.gallery-container.frame-pattern[data-v-6400d24e]::before{content:"";position:absolute;top:-3px;left:-3px;right:-3px;bottom:-3px;border-radius:14px;background:repeating-linear-gradient(45deg,var(--frame-pattern-color,#ffaabb) 0px,var(--frame-pattern-color,#ffaabb) 2px,transparent 2px,transparent 8px),repeating-linear-gradient(-45deg,var(--frame-pattern-color,#ffaabb) 0px,var(--frame-pattern-color,#ffaabb) 2px,transparent 2px,transparent 8px);opacity:.6;z-index:-1}.gallery-container.frame-pattern[data-v-6400d24e]::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:12px;border:2px solid var(--frame-pattern-color,#ffaabb);opacity:.8;pointer-events:none}.gallery-container.frame-image[data-v-6400d24e]{border:var(--frame-border-width,20px) solid rgba(0,0,0,0);border-image:var(--frame-border-image) var(--frame-border-slice,30) fill;border-image-repeat:stretch;border-radius:0}.gallery-container.frame-corner[data-v-6400d24e]::before,.gallery-container.frame-corner[data-v-6400d24e]::after{content:"";position:absolute;width:var(--frame-corner-size,40px);height:var(--frame-corner-size,40px);background-image:var(--frame-corner-image);background-size:contain;background-repeat:no-repeat;z-index:10;pointer-events:none}.gallery-container.frame-corner[data-v-6400d24e]::before{top:-5px;left:-5px}.gallery-container.frame-corner[data-v-6400d24e]::after{top:-5px;right:-5px;transform:scaleX(-1)}.gallery-container.frame-corner .corner-bottom-left[data-v-6400d24e],.gallery-container.frame-corner .corner-bottom-right[data-v-6400d24e]{position:absolute;width:var(--frame-corner-size,40px);height:var(--frame-corner-size,40px);background-image:var(--frame-corner-image);background-size:contain;background-repeat:no-repeat;z-index:10;pointer-events:none}.gallery-container.frame-corner .corner-bottom-left[data-v-6400d24e]{bottom:-5px;left:-5px;transform:scaleY(-1)}.gallery-container.frame-corner .corner-bottom-right[data-v-6400d24e]{bottom:-5px;right:-5px;transform:scale(-1,-1)}@keyframes glowPulse-6400d24e{0%,100%{box-shadow:0 0 var(--frame-glow-size,15px) var(--frame-glow-color,#4488ff),inset 0 0 calc(var(--frame-glow-size,15px)/2) hsla(0,0%,100%,.1)}50%{box-shadow:0 0 calc(var(--frame-glow-size,15px)*1.5) var(--frame-glow-color,#4488ff),0 0 calc(var(--frame-glow-size,15px)*2) var(--frame-glow-color,#4488ff),inset 0 0 var(--frame-glow-size,15px) hsla(0,0%,100%,.15)}}.gallery-header[data-v-6400d24e]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--theme-bg-header);border-bottom:1px solid var(--theme-border-color)}.gallery-header .header-title[data-v-6400d24e]{display:flex;align-items:center;gap:10px;font-size:18px;font-weight:bold;color:var(--theme-text-primary)}.gallery-header .header-title i[data-v-6400d24e]{color:var(--theme-primary)}.gallery-header .header-info[data-v-6400d24e]{display:flex;align-items:center;gap:16px;font-size:13px;color:var(--theme-text-secondary)}.gallery-header .header-info .current-char[data-v-6400d24e]{display:flex;align-items:center;gap:6px;padding:4px 10px;background:var(--theme-primary-light);border-radius:12px}.gallery-header .header-info .current-char i[data-v-6400d24e]{color:var(--theme-primary)}.character-filter[data-v-6400d24e]{display:flex;flex-wrap:wrap;gap:8px;padding:12px 20px;background:rgba(25,30,50,.5);border-bottom:1px solid var(--theme-border-color)}.character-filter .filter-btn[data-v-6400d24e]{padding:6px 14px;background:rgba(50,60,80,.5);border:1px solid var(--theme-border-color);border-radius:16px;color:var(--theme-text-secondary);font-size:12px;cursor:pointer;transition:all .2s}.character-filter .filter-btn[data-v-6400d24e]:hover{background:var(--theme-primary-dark);color:var(--theme-text-primary)}.character-filter .filter-btn.active[data-v-6400d24e]{background:var(--theme-primary-light);border-color:var(--theme-primary);color:var(--theme-text-primary)}.gallery-grid[data-v-6400d24e]{display:flex;flex-wrap:nowrap;justify-content:center;gap:20px;padding:20px;min-height:200px;overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;-webkit-overflow-scrolling:touch}.gallery-grid[data-v-6400d24e]::-webkit-scrollbar{height:8px}.gallery-grid[data-v-6400d24e]::-webkit-scrollbar-track{background:rgba(30,40,60,.5);border-radius:4px}.gallery-grid[data-v-6400d24e]::-webkit-scrollbar-thumb{background:rgba(100,150,200,.4);border-radius:4px}.gallery-grid[data-v-6400d24e]::-webkit-scrollbar-thumb:hover{background:rgba(100,150,200,.6)}.flip-card[data-v-6400d24e]{flex-shrink:0;width:320px;aspect-ratio:2/3;perspective:1000px;cursor:pointer}.flip-card:hover .flip-card-inner[data-v-6400d24e]{box-shadow:0 15px 40px var(--theme-card-hover-shadow);transform:scale(1.03)}.flip-card-inner[data-v-6400d24e]{position:relative;width:100%;height:100%;transition:transform .7s cubic-bezier(0.4,0,0.2,1),box-shadow .3s;transform-style:preserve-3d;border-radius:14px;box-shadow:0 8px 25px var(--theme-card-shadow)}.flip-card.flipped .flip-card-inner[data-v-6400d24e]{transform:rotateY(180deg)}.flip-card-front[data-v-6400d24e],.flip-card-back[data-v-6400d24e]{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:14px;overflow:hidden;border:2px solid var(--theme-card-border)}.flip-card-front img[data-v-6400d24e],.flip-card-back img[data-v-6400d24e]{width:100%;height:100%;object-fit:cover;transition:transform .3s}.flip-card-front:hover img[data-v-6400d24e],.flip-card-back:hover img[data-v-6400d24e]{transform:scale(1.05)}.flip-card-front .card-overlay[data-v-6400d24e]{position:absolute;bottom:0;left:0;right:0;padding:16px;background:linear-gradient(to top,rgba(0,0,0,0.9) 0%,rgba(0,0,0,0.5) 50%,transparent 100%)}.flip-card-front .card-name[data-v-6400d24e]{font-size:16px;font-weight:bold;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.8);margin-bottom:4px}.flip-card-front .card-character[data-v-6400d24e]{font-size:12px;color:hsla(0,0%,100%,.7)}.flip-card-back[data-v-6400d24e]{transform:rotateY(180deg)}.empty-state[data-v-6400d24e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--theme-text-muted)}.empty-state i[data-v-6400d24e]{font-size:48px;margin-bottom:16px;opacity:.5}.empty-state p[data-v-6400d24e]{margin:4px 0;font-size:14px}.empty-state .hint[data-v-6400d24e]{font-size:12px;color:var(--theme-text-muted)}.gallery-footer[data-v-6400d24e]{text-align:center;padding:12px 20px;font-size:12px;color:var(--theme-text-muted);background:var(--theme-bg-main);border-top:1px solid var(--theme-border-color)}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>