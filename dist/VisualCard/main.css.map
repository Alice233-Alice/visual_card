{"version":3,"file":"main.css","mappings":"AACA,8BACI,YACA,aACA,mBACA,eACA,YAEA,0CACI,kBACA,WACA,YACA,kBACA,yBACA,4BAGJ,kDACI,0BAGJ,mFAEI,kBACA,WACA,YAEA,2BACA,mBACA,oCACA,gBACA,aACA,sBACA,uBACA,mBAGJ,0CACI,sBAEA,sDACI,WACA,YACA,iBAGJ,qDACI,kBACA,SACA,WACA,0BACA,WACA,cACA,eAIR,yCACI,yBACA,WACA,0BACA,aAEA,uDACI,aACA,mBACA,uBACA,YAGJ,oDACI,eACA,gB;ACnBZ,wCACI,YAAa,CACb,cAAe,CACf,sBAAuB,CACvB,QAAS,CACT,YAAa,CACb,UACJ","sources":["src://tavern_helper_template/src/VisualCard/Card.vue","src://tavern_helper_template/src/VisualCard/App.vue"],"sourcesContent":["\r\n.visual-card {\r\n    width: 150px;\r\n    height: 220px;\r\n    perspective: 1000px;\r\n    cursor: pointer;\r\n    margin: 10px;\r\n\r\n    .card-inner {\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        text-align: center;\r\n        transition: transform 0.6s;\r\n        transform-style: preserve-3d;\r\n    }\r\n\r\n    &.flipped .card-inner {\r\n        transform: rotateY(180deg);\r\n    }\r\n\r\n    .card-front,\r\n    .card-back {\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        -webkit-backface-visibility: hidden;\r\n        backface-visibility: hidden;\r\n        border-radius: 10px;\r\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n        overflow: hidden;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .card-front {\r\n        background-color: #fff;\r\n\r\n        .card-image {\r\n            width: 100%;\r\n            height: 100%;\r\n            object-fit: cover;\r\n        }\r\n\r\n        .card-name {\r\n            position: absolute;\r\n            bottom: 0;\r\n            width: 100%;\r\n            background: rgba(0, 0, 0, 0.5);\r\n            color: white;\r\n            padding: 5px 0;\r\n            font-size: 14px;\r\n        }\r\n    }\r\n\r\n    .card-back {\r\n        background-color: #f8f9fa;\r\n        color: #333;\r\n        transform: rotateY(180deg);\r\n        padding: 15px;\r\n\r\n        .back-content {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            height: 100%;\r\n        }\r\n\r\n        .back-text {\r\n            font-size: 14px;\r\n            line-height: 1.4;\r\n        }\r\n    }\r\n}\r\n","<template>\r\n    <div class=\"visual-card-container\">\r\n        <Card v-for=\"(card, index) in cards\" :key=\"index\" :data=\"card\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { onMounted, ref } from 'vue';\r\nimport Card from './Card.vue';\r\n\r\ninterface VisualCardData {\r\n    name: string;\r\n    img_code: string;\r\n    back_text: string;\r\n}\r\n\r\nconst cards = ref<VisualCardData[]>([]);\r\n\r\nonMounted(async () => {\r\n    // 获取当前消息 ID\r\n    const messageId = getCurrentMessageId();\r\n    if (messageId === undefined) return;\r\n\r\n    // 获取消息内容\r\n    // getChatMessages 返回的是数组，如果 messageId 是索引，需要确认 getChatMessages(messageId) 的行为\r\n    // 根据定义：getChatMessages(range) 返回 ChatMessage[]\r\n    // 如果 range 是数字，返回该楼层的消息数组（可能包含 swipes）\r\n    const messages = getChatMessages(messageId);\r\n    if (!messages || messages.length === 0) return;\r\n\r\n    // 取第一条（当前显示的消息）\r\n    const message = messages[0];\r\n    const content = message.message; // ChatMessage 使用 message 字段，而不是 mes\r\n\r\n    // 解析 content 中的 <visual_cards> 标签\r\n    const regex = /<visual_cards>([\\s\\S]*?)<\\/visual_cards>/;\r\n    const match = content.match(regex);\r\n\r\n    if (match && match[1]) {\r\n        try {\r\n            const jsonStr = match[1].trim();\r\n            const parsedData = JSON.parse(jsonStr);\r\n            if (Array.isArray(parsedData)) {\r\n                cards.value = parsedData;\r\n            }\r\n        } catch (e) {\r\n            console.error('Failed to parse visual cards JSON:', e);\r\n        }\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.visual-card-container {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n    gap: 20px;\r\n    padding: 20px;\r\n    width: 100%;\r\n}\r\n</style>"],"names":[],"ignoreList":[],"sourceRoot":""}