{"version":3,"file":"index.js","mappings":"gBAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,E,GCRPI,EAA2B,CAAC,ECDhC,MAAM,EAA+BC,ICE/BC,EAAa,CACfJ,IAAK,EACLK,MAAO,gBAELC,EAAa,CAAED,MAAO,mBACtBE,EAAa,CAAEF,MAAO,mBACtBG,EAAa,CAAC,OACdC,EAAa,CAAEJ,MAAO,kBACtBK,EAAa,CAAC,OAEpB,GAA6B,qBAAiB,CAC1CC,OAAQ,MACR,KAAAC,CAAMC,GACF,MAAMC,GAAW,IAAAC,KAAI,MACfC,GAAY,IAAAD,MAAI,GAChBE,EAAW,KACbD,EAAUE,OAASF,EAAUE,OAG3BC,EAAwB,KAC1B,IACI,MAAMC,EAAWC,iBAAiB,GAClC,IAAKD,GAAgC,IAApBA,EAASE,OACtB,OACJ,MAAMC,EAAiBH,EAAS,GAE1BI,EAAUC,EAAEC,IAAIH,EAAgB,QAAUE,EAAEC,IAAIH,EAAgB,YAAc,GAE9EI,EAAc,wCACdC,EAAQJ,EAAQI,MAAMD,GACxBC,GAASA,EAAM,IACfC,QAAQC,IAAI,sBAAuBF,EAAM,IACzCd,EAASI,MAAQU,EAAM,IAGvBC,QAAQC,IAAI,4CAEpB,CACA,MAAOC,GACHF,QAAQG,KAAK,oCAAqCD,EACtD,GAiBJ,OAfA,IAAAE,WAAU,KAENd,IAMuB,mBAAZe,SAAmD,oBAAlBC,eACxCD,QAAQC,cAAcC,iBAAkB,KAEpCC,WAAWlB,EAAuB,SAIvC,CAACmB,EAAMC,IACFzB,EAAc,QACf,kBAAc,wBAAoB,MAAOV,EAAY,EACpD,wBAAoB,MAAO,CACvBC,OAAO,oBAAgB,CAAC,YAAa,CAAEmC,QAASxB,EAAUE,SAC1DuB,QAASxB,GACV,EACC,wBAAoB,MAAOX,EAAY,EACnC,wBAAoB,MAAOC,EAAY,EACnC,wBAAoB,MAAO,CACvBmC,IAAK5B,EAASI,MACdyB,IAAK,gBACN,KAAM,EAAenC,MAE5B,wBAAoB,MAAOC,EAAY,EACnC,wBAAoB,sEACpB,wBAAoB,MAAO,CACvBiC,IAAK5B,EAASI,MACdyB,IAAK,oBACLC,MAAO,CAAE,UAAa,eACvB,KAAM,EAAelC,QAGjC,OAEL,wBAAoB,QAAQ,EAE1C,I,MFlFJ,SAASmC,EAAoBC,GAE5B,IAAIC,EAAe7C,EAAyB4C,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAapD,QAGrB,IAAIsD,EAAS/C,EAAyB4C,GAAY,CAGjDnD,QAAS,CAAC,GAOX,OAHAuD,EAAoBJ,GAAUG,EAAQA,EAAOtD,QAASkD,GAG/CI,EAAOtD,OACf,C,MGhBA,MAEA,GAFiC,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBCHvEwD,EAAE,MACA,IAAAC,WAAUC,GAAKC,MAAM","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/./src/角色状态栏/app.vue?00fb","webpack://tavern_helper_template/src/角色状态栏/app.vue?bb6d","src://tavern_helper_template/src/角色状态栏/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"cg-container\"\n};\nconst _hoisted_2 = { class: \"flip-card-inner\" };\nconst _hoisted_3 = { class: \"flip-card-front\" };\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = { class: \"flip-card-back\" };\nconst _hoisted_6 = [\"src\"];\nimport { onMounted, ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const imageUrl = ref(null);\n        const isFlipped = ref(false);\n        const flipCard = () => {\n            isFlipped.value = !isFlipped.value;\n        };\n        // Function to parse the current message and extract the URL from <status> tags\n        const parseMessageForStatus = () => {\n            try {\n                const messages = getChatMessages(-1);\n                if (!messages || messages.length === 0)\n                    return;\n                const lastMessageObj = messages[0];\n                // Check for .mes or .message property\n                const content = _.get(lastMessageObj, 'mes') || _.get(lastMessageObj, 'message') || '';\n                // Support generic tag or <status> specifically\n                const statusRegex = /<(?:status|cg)>(.*?)<\\/(?:status|cg)>/;\n                const match = content.match(statusRegex);\n                if (match && match[1]) {\n                    console.log('Found Character CG:', match[1]);\n                    imageUrl.value = match[1];\n                }\n                else {\n                    console.log('No Character CG found in current message.');\n                }\n            }\n            catch (e) {\n                console.warn('Error parsing message for status:', e);\n            }\n        };\n        onMounted(() => {\n            // Initial check\n            parseMessageForStatus();\n            // Listen for new messages (This is a simplified example, might need more robust event listening)\n            // We can use the 'tavern_events.MESSAGE_RECEIVED' if available via the bridge\n            // Or simpler MutationObserver on the chat container for now if we want to be standalone-ish\n            // But better to use the exposed events if possible.\n            // Assuming eventOn is available globally or imported\n            if (typeof eventOn === 'function' && typeof tavern_events !== 'undefined') {\n                eventOn(tavern_events.MESSAGE_RECEIVED, () => {\n                    // Give a small delay for DOM to update if we are scraping DOM\n                    setTimeout(parseMessageForStatus, 100);\n                });\n            }\n        });\n        return (_ctx, _cache) => {\n            return (imageUrl.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"flip-card\", { flipped: isFlipped.value }]),\n                        onClick: flipCard\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"img\", {\n                                    src: imageUrl.value,\n                                    alt: \"Character CG\"\n                                }, null, 8 /* PROPS */, _hoisted_4)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createCommentVNode(\" You can put a different image or content here for the back side \"),\n                                _createElementVNode(\"img\", {\n                                    src: imageUrl.value,\n                                    alt: \"Character CG Back\",\n                                    style: { \"transform\": \"scaleX(-1)\" }\n                                }, null, 8 /* PROPS */, _hoisted_6)\n                            ])\n                        ])\n                    ], 2 /* CLASS */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=f2be20f2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_fcc8164c33ab268660e3819796c9f485/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f2be20f2\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport app from './app.vue';\n\n$(() => {\n  createApp(app).mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","__name","setup","__props","imageUrl","ref","isFlipped","flipCard","value","parseMessageForStatus","messages","getChatMessages","length","lastMessageObj","content","_","get","statusRegex","match","console","log","e","warn","onMounted","eventOn","tavern_events","MESSAGE_RECEIVED","setTimeout","_ctx","_cache","flipped","onClick","src","alt","style","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","$","createApp","app","mount"],"ignoreList":[],"sourceRoot":""}